### جدول الكيانات والعلاقات في قاعدة البيانات
| الكيان                               | الوصف                                                   | العلاقات                                                               |
| ------------------------------------ | ------------------------------------------------------- | ---------------------------------------------------------------------- |
| **المستخدمون (Users)**               | يخزن بيانات المستخدمين (العملاء والمدراء).              | يمكن أن يكون لكل مستخدم العديد من الطلبات والمراجعات.                  |
| **الفئات (Categories)**              | يخزن فئات المنتجات (مثل الملابس، الإلكترونيات... إلخ).  | يرتبط بكل فئة مجموعة من المنتجات.                                      |
| **سياسات الشحن (Shipping Policies)** | يخزن معلومات عن سياسات الشحن مثل التكلفة والمدة.        | يرتبط بكل منتج وسياسة شحن.                                             |
| **سياسات الإرجاع (Return Policies)** | يخزن معلومات عن سياسات الإرجاع مثل المدة والشروط.       | يرتبط بكل منتج وسياسة إرجاع.                                           |
| **سياسات الدفع (Payment Policies)**  | يخزن معلومات عن سياسات الدفع مثل الرسوم وطريقة الدفع.   | يرتبط بكل منتج وسياسة دفع.                                             |
| **منتجات (Products)**                | يخزن معلومات عن المنتجات مثل الاسم، السعر، والوصف.      | ينتمي كل منتج إلى فئة واحدة وله سياسات شحن ودفع وإرجاع.                |
| **قائمة الرغبات (Wishlist)**         | يخزن المنتجات التي يضيفها المستخدمون إلى قائمة رغباتهم. | يرتبط بكل مستخدم مع المنتجات في القائمة.                               |
| **الطلبات (Orders)**                 | يخزن بيانات الطلبات، مثل المستخدم وعدد المنتجات.        | يرتبط بكل طلب مع المستخدم والمنتجات المشتراة.                          |
| **تفاصيل الطلب (Order Details)**     | يخزن تفاصيل المنتجات في الطلب مثل الكمية والسعر.        | يرتبط بكل تفاصيل طلب مع منتج معين، سياسة شحن، سياسة دفع، وسياسة إرجاع. |
| **سجل بطاقات الدفع (Card Records)**  | يخزن بيانات البطاقات المستخدمة للدفع.                   | يرتبط بكل بطاقة مع مستخدم معين.                                        |
| **المراجعات (Reviews)**              | يخزن تقييمات ومراجعات المستخدمين للمنتجات.              | يرتبط بكل مراجعة مع مستخدم ومنتج معين.                                 |


### **المستخدمون (Users)**  
جدول لتخزين بيانات المستخدمين (العملاء والمدراء).

| الحقل           | نوع البيانات          | الوصف                                  |
| --------------- | --------------------- | -------------------------------------- |
| `id`            | INT (Primary Key)     | معرف فريد للمستخدم.                    |
| `name`          | VARCHAR(100)          | اسم المستخدم.                          |
| `email`         | VARCHAR(255) UNIQUE   | البريد الإلكتروني (يجب أن يكون فريدًا). |
| `password`      | VARCHAR(255)          | كلمة المرور (مشفرة).                   |
| `phone`         | VARCHAR(20) UNIQUE    | رقم الهاتف (يجب أن يكون فريدًا).        |
| `address`       | TEXT                  | عنوان المستخدم.                        |
| `profile_image` | VARCHAR(255)          | رابط صورة المستخدم.                    |
| `role`          | ENUM('user', 'admin') | دور المستخدم (عميل أو مدير).           |
| `created_at`    | DATETIME              | تاريخ إنشاء الحساب.                    |

---

### **الفئات (Categories)**  
جدول لتخزين فئات المنتجات.

| الحقل                | نوع البيانات      | الوصف                                 |
| -------------------- | ----------------- | ------------------------------------- |
| `id`                 | INT (Primary Key) | معرف فريد للفئة.                      |
| `name`               | VARCHAR(100)      | اسم الفئة.                            |
| `description`        | TEXT              | وصف الفئة.                            |
| `created_at`         | DATETIME          | تاريخ إنشاء الفئة.                    |

---

### **تصميم الجداول الثلاثة للسياسات:**


#### **1. جدول سياسات الشحن (Shipping Policies)**  
يتضمن معلومات مثل التكلفة والمدة المقدرة.

| الحقل            | نوع البيانات      | الوصف                                 |
| ---------------- | ----------------- | ------------------------------------- |
| `id`             | INT (Primary Key) | معرف فريد لسياسة الشحن.               |
| `name`           | VARCHAR(100)      | اسم سياسة الشحن (مثال: "توصيل سريع"). |
| `cost`           | DECIMAL(10, 2)    | تكلفة الشحن (مثال: 5.00).             |
| `estimated_days` | INT               | عدد الأيام المتوقعة للتوصيل.          |
| `description`    | TEXT              | تفاصيل إضافية حول سياسة الشحن.        |
| `created_at`     | DATETIME          | تاريخ إنشاء السياسة.                  |

---

#### **2. جدول سياسات الإرجاع (Return Policies)**  
يشمل معلومات حول شروط الإرجاع والمدة المسموح بها.

| الحقل           | نوع البيانات      | الوصف                                    |
| --------------- | ----------------- | ---------------------------------------- |
| `id`            | INT (Primary Key) | معرف فريد لسياسة الإرجاع.                |
| `name`          | VARCHAR(100)      | اسم سياسة الإرجاع (مثال: "إرجاع مجاني"). |
| `return_period` | INT               | عدد الأيام المسموح بها للإرجاع.          |
| `description`   | TEXT              | تفاصيل إضافية حول سياسة الإرجاع.         |
| `created_at`    | DATETIME          | تاريخ إنشاء السياسة.                     |

---

#### **3. جدول سياسات الدفع (Payment Policies)**  
يشمل معلومات مثل طرق الدفع المتاحة ورسوم الدفع (إن وجدت).

| الحقل         | نوع البيانات      | الوصف                                         |
| ------------- | ----------------- | --------------------------------------------- |
| `id`          | INT (Primary Key) | معرف فريد لسياسة الدفع.                       |
| `name`        | VARCHAR(100)      | اسم سياسة الدفع (مثال: "الدفع عند الاستلام"). |
| `fee`         | DECIMAL(10, 2)    | رسوم إضافية على الدفع (إن وجدت).              |
| `description` | TEXT              | تفاصيل إضافية حول سياسة الدفع.                |
| `created_at`  | DATETIME          | تاريخ إنشاء السياسة.                          |

---

#### **جدول ربط المنتجات مع السياسات (Product Policies)**  
هذا الجدول يربط المنتج مع سياسة الشحن والدفع والإرجاع الخاصة به.

| الحقل                | نوع البيانات      | الوصف                                            |
| -------------------- | ----------------- | ------------------------------------------------ |
| `id`                 | INT (Primary Key) | معرف فريد للصف.                                  |
| `product_id`         | INT (Foreign Key) | معرف المنتج (يرتبط بجدول المنتجات).              |
| `shipping_policy_id` | INT (Foreign Key) | معرف سياسة الشحن (يرتبط بجدول سياسات الشحن).     |
| `payment_policy_id`  | INT (Foreign Key) | معرف سياسة الدفع (يرتبط بجدول سياسات الدفع).     |
| `return_policy_id`   | INT (Foreign Key) | معرف سياسة الإرجاع (يرتبط بجدول سياسات الإرجاع). |
| `created_at`         | DATETIME          | تاريخ إضافة الربط.                               |


### **المنتجات (Products)**  
جدول لتخزين بيانات المنتجات.

| الحقل                | نوع البيانات      | الوصف                                      |
| -------------------- | ----------------- | ------------------------------------------ |
| `id`                 | INT (Primary Key) | معرف فريد للمنتج.                          |
| `name`               | VARCHAR(255)      | اسم المنتج.                                |
| `short_description`  | VARCHAR(255)      | وصف مختصر للمنتج.                          |
| `long_description`   | TEXT              | وصف طويل مفصل للمنتج.                      |
| `price`              | DECIMAL(10, 2)    | سعر المنتج.                                |
| `stock`              | INT               | الكمية المتاحة في المخزون.                 |
| `shipping_policy_id` | INT (Foreign Key) | معرف سياسة الشحن (يرتبط بجدول السياسات).   |
| `payment_policy_id`  | INT (Foreign Key) | معرف سياسة الدفع (يرتبط بجدول السياسات).   |
| `return_policy_id`   | INT (Foreign Key) | معرف سياسة الإرجاع (يرتبط بجدول السياسات). |
| `category_id`        | INT (Foreign Key) | معرف الفئة التي ينتمي إليها المنتج.        |
| `image_url`          | VARCHAR(255)      | رابط صورة المنتج.                          |
| `created_at`         | DATETIME          | تاريخ إضافة المنتج.                        |

---

###  **قائمة الرغبات (Wishlist)**  
جدول لتخزين المنتجات التي يضيفها المستخدمون إلى قائمة الرغبات.

| الحقل        | نوع البيانات      | الوصف                            |
| ------------ | ----------------- | -------------------------------- |
| `id`         | INT (Primary Key) | معرف فريد للعنصر.                |
| `user_id`    | INT (Foreign Key) | معرف المستخدم.                   |
| `product_id` | INT (Foreign Key) | معرف المنتج.                     |
| `created_at` | DATETIME          | تاريخ الإضافة إلى قائمة الرغبات. |

---

### **الطلبات (Orders)**  
جدول لتخزين بيانات الطلبات المجموعة

| الحقل                | نوع البيانات                      | الوصف                          |
| -------------------- | --------------------------------- | ------------------------------ |
| `id`                 | INT (Primary Key)                 | معرف فريد للطلب.               |
| `user_id`            | INT (Foreign Key)                 | معرف المستخدم الذي قام بالطلب. |
| `products_number`    | INT                               | عدد المنتجات.                  |
| `total_price`        | DECIMAL(10, 2)                    | المبلغ الإجمالي للطلب.   |
| `created_at`         | DATETIME                          | تاريخ إنشاء الطلب.             |

---

### **جدول تفاصيل الطلب (Order Details)**

| الحقل                | نوع البيانات                       | الوصف                                          |
| -------------------- | ---------------------------------- | ---------------------------------------------- |
| `id`                 | INT (Primary Key)                  | معرف فريد لتفاصيل الطلب.                       |
| `order_id`           | INT (Primary Key)                  | معرف الطلب.                       |
| `product_id`         | INT (Foreign Key)                  | معرف المنتج (يرتبط بجدول المنتجات).            |
| `card_id`            | INT (Foreign Key)                  | معرف البطاقة المستخدمة للدفع.  |
| `quantity`           | INT                                | كمية المنتج في الطلب.                          |
| `price_at_order`     | DECIMAL(10, 2)                     | سعر المنتج في وقت الطلب (لحفظ السعر التاريخي). |
| `payment_policy_id`  | INT (Foreign Key)                  | معرف سياسة الدفع المعتمدة.                     |
| `shipping_policy_id` | INT (Foreign Key)                  | معرف سياسة الشحن المعتمدة.                     |
| `return_policy_id`   | INT (Foreign Key)                  | معرف سياسة الإرجاع المعتمدة.                   |
| `status`             | ENUM('معالجة', 'مشحونة', 'مستلمة', حذف) | حالة الطلب لهذا المنتج.                        |
| `created_at`         | DATETIME                           | تاريخ إضافة التفاصيل.                          |

---

### **جدول سجل بطاقات الدفع**  

| الحقل              | نوع البيانات      | الوصف                                |
| ------------------ | ----------------- | ------------------------------------ |
| `id`               | INT (Primary Key) | معرف فريد للبطاقة.                   |
| `user_id`          | INT (Foreign Key) | معرف المستخدم الذي يملك البطاقة.     |
| `card_number`      | VARCHAR(19)       | رقم البطاقة (يُحفظ بشكل مشفر).        |
| `card_holder_name` | VARCHAR(255)      | اسم حامل البطاقة.                    |
| `expiry_date`      | CHAR(5)           | تاريخ انتهاء الصلاحية (MM/YY).       |
| `cvv`              | CHAR(3)           | رمز الحماية (يُحفظ بشكل مشفر).        |
| `billing_address`  | TEXT              | عنوان الفواتير المرتبط بالبطاقة.     |
| `created_at`       | DATETIME          | تاريخ إضافة البطاقة.                 |

---

###  **المراجعات (Reviews)**                      
جدول لتخزين تقييمات ومراجعات المستخدمين للمنتجات.

| الحقل        | نوع البيانات      | الوصف                           |
| ------------ | ----------------- | ------------------------------- |
| `id`         | INT (Primary Key) | معرف فريد للتقييم.              |
| `user_id`    | INT (Foreign Key) | معرف المستخدم الذي كتب التقييم. |
| `product_id` | INT (Foreign Key) | معرف المنتج.                    |
| `comment`    | TEXT              | تعليق المستخدم.                 |
| `created_at` | DATETIME          | تاريخ كتابة التقييم.            |


### العلاقات بين الجداول ونوعها:

| الجداول المرتبطة                        | نوع العلاقة | الوصف                                                |
| --------------------------------------- | ----------- | ---------------------------------------------------- |
| **المستخدمون** ↔ **الطلبات**            | One-to-Many | كل مستخدم يمكن أن يكون له العديد من الطلبات.         |
| **المستخدمون** ↔ **المراجعات**          | One-to-Many | كل مستخدم يمكن أن يكتب العديد من التقييمات.          |
| **المستخدمون** ↔ **قائمة الرغبات**      | One-to-Many | كل مستخدم يمكن أن يضيف عدة منتجات إلى قائمة الرغبات. |
| **المنتجات** ↔ **المراجعات**            | One-to-Many | كل منتج يمكن أن يحتوي على العديد من المراجعات.       |
| **المنتجات** ↔ **تفاصيل الطلب**         | One-to-Many | كل منتج يمكن أن يظهر في العديد من تفاصيل الطلب.      |
| **المنتجات** ↔ **قائمة الرغبات**        | One-to-Many | كل منتج يمكن أن يُضاف إلى عدة قوائم رغبات.            |
| **المنتجات** ↔ **سياسات الشحن**         | Many-to-One | كل منتج مرتبط بسياسة شحن واحدة فقط.                  |
| **المنتجات** ↔ **سياسات الدفع**         | Many-to-One | كل منتج مرتبط بسياسة دفع واحدة فقط.                  |
| **المنتجات** ↔ **سياسات الإرجاع**       | Many-to-One | كل منتج مرتبط بسياسة إرجاع واحدة فقط.                |
| **الطلبات** ↔ **تفاصيل الطلب**          | One-to-Many | كل طلب يحتوي على العديد من تفاصيل الطلب.             |
| **الطلبات** ↔ **المستخدمون**            | Many-to-One | كل طلب مرتبط بمستخدم واحد فقط.                       |
| **تفاصيل الطلب** ↔ **سياسات الدفع**     | Many-to-One | كل تفاصيل طلب مرتبط بسياسة دفع واحدة.                |
| **تفاصيل الطلب** ↔ **سياسات الشحن**     | Many-to-One | كل تفاصيل طلب مرتبط بسياسة شحن واحدة.                |
| **تفاصيل الطلب** ↔ **سياسات الإرجاع**   | Many-to-One | كل تفاصيل طلب مرتبط بسياسة إرجاع واحدة.              |
| **تفاصيل الطلب** ↔ **المنتجات**         | Many-to-One | كل تفاصيل طلب مرتبط بمنتج واحد فقط.                  |
| **سجل بطاقات الدفع** ↔ **المستخدمون**   | Many-to-One | كل بطاقة دفع مرتبطة بمستخدم واحد فقط.                |
| **سجل بطاقات الدفع** ↔ **تفاصيل الطلب** | Many-to-One | كل بطاقة دفع يمكن أن ترتبط بالعديد من تفاصيل الطلب.  |
| **المنتجات** ↔ **الفئات**               | Many-to-One | كل منتج ينتمي إلى فئة واحدة فقط.                     |

هذه هي العلاقات بين الجداول في قاعدة البيانات مع أنواعها.